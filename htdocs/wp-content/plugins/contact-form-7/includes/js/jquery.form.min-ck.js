/*!
 * jQuery Form Plugin
 * version: 3.50.0-2014.02.05
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)})(function(e){function r(t){var n=t.data;if(!t.isDefaultPrevented()){t.preventDefault();e(t.target).ajaxSubmit(n)}}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined){s.clk_x=t.offsetX;s.clk_y=t.offsetY}else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left;s.clk_y=t.pageY-o.top}else{s.clk_x=t.pageX-n.offsetLeft;s.clk_y=t.pageY-n.offsetTop}setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined;t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)};e.fn.ajaxSubmit=function(r){function O(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++){n[o]=n[o].replace(/\+/g," ");u=n[o].split("=");s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])])}return s}function M(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=O(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100));r.uploadProgress(e,n,i,t)},!1);return t});u.data=null;var a=u.beforeSend;u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n;a&&a.call(this,e,t)};return e.ajax(u)}function _(t){function C(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n);t=e.document}return t}function A(){function l(){try{var e=C(g).readyState;s("state = "+e);e&&e.toLowerCase()=="uninitialized"&&setTimeout(l,50)}catch(t){s("Server abort: ",t," (",t.name,")");P(N);S&&clearTimeout(S);S=undefined}}var t=a.attr2("target"),n=a.attr2("action"),r="multipart/form-data",u=a.attr("enctype")||a.attr("encoding")||r;o.setAttribute("target",v);(!i||/post/i.test(i))&&o.setAttribute("method","POST");n!=c.url&&o.setAttribute("action",c.url);!c.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});c.timeout&&(S=setTimeout(function(){E=!0;P(T)},c.timeout));var h=[];try{if(c.extraData)for(var p in c.extraData)c.extraData.hasOwnProperty(p)&&(e.isPlainObject(c.extraData[p])&&c.extraData[p].hasOwnProperty("name")&&c.extraData[p].hasOwnProperty("value")?h.push(e('<input type="hidden" name="'+c.extraData[p].name+'">').val(c.extraData[p].value).appendTo(o)[0]):h.push(e('<input type="hidden" name="'+p+'">').val(c.extraData[p]).appendTo(o)[0]));c.iframeTarget||m.appendTo("body");g.attachEvent?g.attachEvent("onload",P):g.addEventListener("load",P,!1);setTimeout(l,15);try{o.submit()}catch(y){var b=document.createElement("form").submit;b.apply(o)}}finally{o.setAttribute("action",n);o.setAttribute("enctype",u);t?o.setAttribute("target",t):a.removeAttr("target");e(h).remove()}}function P(t){if(y.aborted||D)return;M=C(g);if(!M){s("cannot access response document");t=N}if(t===T&&y){y.abort("timeout");x.reject(y,"timeout");return}if(t==N&&y){y.abort("server abort");x.reject(y,"error","server abort");return}if(!M||M.location.href==c.iframeSrc)if(!E)return;g.detachEvent?g.detachEvent("onload",P):g.removeEventListener("load",P,!1);var n="success",r;try{if(E)throw"timeout";var i=c.dataType=="xml"||M.XMLDocument||e.isXMLDoc(M);s("isXml="+i);if(!i&&window.opera&&(M.body===null||!M.body.innerHTML)&&--_){s("requeing onLoad callback, DOM not available");setTimeout(P,250);return}var o=M.body?M.body:M.documentElement;y.responseText=o?o.innerHTML:null;y.responseXML=M.XMLDocument?M.XMLDocument:M;i&&(c.dataType="xml");y.getResponseHeader=function(e){var t={"content-type":c.dataType};return t[e.toLowerCase()]};if(o){y.status=Number(o.getAttribute("status"))||y.status;y.statusText=o.getAttribute("statusText")||y.statusText}var u=(c.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||c.textarea){var l=M.getElementsByTagName("textarea")[0];if(l){y.responseText=l.value;y.status=Number(l.getAttribute("status"))||y.status;y.statusText=l.getAttribute("statusText")||y.statusText}else if(a){var p=M.getElementsByTagName("pre")[0],v=M.getElementsByTagName("body")[0];p?y.responseText=p.textContent?p.textContent:p.innerText:v&&(y.responseText=v.textContent?v.textContent:v.innerText)}}else u=="xml"&&!y.responseXML&&y.responseText&&(y.responseXML=H(y.responseText));try{O=F(y,u,c)}catch(b){n="parsererror";y.error=r=b||n}}catch(b){s("error caught: ",b);n="error";y.error=r=b||n}if(y.aborted){s("upload aborted");n=null}y.status&&(n=y.status>=200&&y.status<300||y.status===304?"success":"error");if(n==="success"){c.success&&c.success.call(c.context,O,"success",y);x.resolve(y.responseText,"success",y);h&&e.event.trigger("ajaxSuccess",[y,c])}else if(n){r===undefined&&(r=y.statusText);c.error&&c.error.call(c.context,y,n,r);x.reject(y,"error",r);h&&e.event.trigger("ajaxError",[y,c,r])}h&&e.event.trigger("ajaxComplete",[y,c]);h&&!--e.active&&e.event.trigger("ajaxStop");c.complete&&c.complete.call(c.context,y,n);D=!0;c.timeout&&clearTimeout(S);setTimeout(function(){c.iframeTarget?m.attr("src",c.iframeSrc):m.remove();y.responseXML=null},100)}var o=a[0],u,l,c,h,v,m,g,y,b,w,E,S,x=e.Deferred();x.abort=function(e){y.abort(e)};if(t)for(l=0;l<p.length;l++){u=e(p[l]);n?u.prop("disabled",!1):u.removeAttr("disabled")}c=e.extend(!0,{},e.ajaxSettings,r);c.context=c.context||c;v="jqFormIO"+(new Date).getTime();if(c.iframeTarget){m=e(c.iframeTarget);w=m.attr2("name");w?v=w:m.attr2("name",v)}else{m=e('<iframe name="'+v+'" src="'+c.iframeSrc+'" />');m.css({position:"absolute",top:"-1000px",left:"-1000px"})}g=m[0];y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n);this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(r){}m.attr("src",c.iframeSrc);y.error=n;c.error&&c.error.call(c.context,y,n,t);h&&e.event.trigger("ajaxError",[y,c,n]);c.complete&&c.complete.call(c.context,y,n)}};h=c.global;h&&0===e.active++&&e.event.trigger("ajaxStart");h&&e.event.trigger("ajaxSend",[y,c]);if(c.beforeSend&&c.beforeSend.call(c.context,y,c)===!1){c.global&&e.active--;x.reject();return x}if(y.aborted){x.reject();return x}b=o.clk;if(b){w=b.name;if(w&&!b.disabled){c.extraData=c.extraData||{};c.extraData[w]=b.value;if(b.type=="image"){c.extraData[w+".x"]=o.clk_x;c.extraData[w+".y"]=o.clk_y}}}var T=1,N=2,k=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");if(L&&k){c.extraData=c.extraData||{};c.extraData[L]=k}c.forceSync?A():setTimeout(A,10);var O,M,_=50,D,H=e.parseXML||function(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else t=(new DOMParser).parseFromString(e,"text/xml");return t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},B=e.parseJSON||function(e){return window.eval("("+e+")")},F=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror");r&&r.dataFilter&&(o=r.dataFilter(o,n));typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=B(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o));return o};return x}if(!this.length){s("ajaxSubmit: skipping submit process - no element selected");return this}var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={});i=r.type||this.attr2("method");o=r.url||this.attr2("action");u=typeof o=="string"?e.trim(o):"";u=u||window.location.href||"";u&&(u=(u.match(/^([^#]+)/)||[])[1]);r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var l={};this.trigger("form-pre-serialize",[this,r,l]);if(l.veto){s("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1){s("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var h=r.traditional;h===undefined&&(h=e.ajaxSettings.traditional);var p=[],v,m=this.formToArray(r.semantic,p);if(r.data){r.extraData=r.data;v=e.param(r.data,h)}if(r.beforeSubmit&&r.beforeSubmit(m,this,r)===!1){s("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[m,this,r,l]);if(l.veto){s("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var g=e.param(m,h);v&&(g=g?g+"&"+v:v);if(r.type.toUpperCase()=="GET"){r.url+=(r.url.indexOf("?")>=0?"&":"?")+g;r.data=null}else r.data=g;var y=[];r.resetForm&&y.push(function(){a.resetForm()});r.clearForm&&y.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var b=r.success||function(){};y.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(b,arguments)})}else r.success&&y.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=y.length;s<o;s++)y[s].apply(i,[e,t,n||a,a])};if(r.error){var w=r.error;r.error=function(e,t,n){var i=r.context||this;w.apply(i,[e,t,n,a])}}if(r.complete){var E=r.complete;r.complete=function(e,t){var n=r.context||this;E.apply(n,[e,t,a])}}var S=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),x=S.length>0,T="multipart/form-data",N=a.attr("enctype")==T||a.attr("encoding")==T,C=t.fileapi&&t.formdata;s("fileAPI :"+C);var k=(x||N)&&!C,L;r.iframe!==!1&&(r.iframe||k)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){L=_(m)}):L=_(m):(x||N)&&C?L=M(m):L=e.ajax(r);a.removeData("jqxhr").data("jqxhr",L);for(var A=0;A<p.length;A++)p[A]=null;this.trigger("form-submit-notify",[this,r]);return this};e.fn.ajaxForm=function(t){t=t||{};t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};if(!e.isReady&&n.s){s("DOM not ready, queuing ajaxForm");e(function(){e(n.s,n.c).ajaxForm(t)});return this}s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(t.delegation){e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=this.attr("id"),u=n?s.getElementsByTagName("*"):s.elements,a;u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get());if(o){a=e(":input[form="+o+"]").get();a.length&&(u=(u||[]).concat(a))}if(!u||!u.length)return i;var l,h,p,d,v,m,g;for(l=0,m=u.length;l<m;l++){v=u[l];p=v.name;if(!p||v.disabled)continue;if(n&&s.clk&&v.type=="image"){if(s.clk==v){i.push({name:p,value:e(v).val(),type:v.type});i.push({name:p+".x",value:s.clk_x},{name:p+".y",value:s.clk_y})}continue}d=e.fieldValue(v,!0);if(d&&d.constructor==Array){r&&r.push(v);for(h=0,g=d.length;h<g;h++)i.push({name:p,value:d[h]})}else if(t.fileapi&&v.type=="file"){r&&r.push(v);var y=v.files;if(y.length)for(h=0;h<y.length;h++)i.push({name:p,value:y[h],type:v.type});else i.push({name:p,value:"",type:v.type})}else if(d!==null&&typeof d!="undefined"){r&&r.push(v);i.push({name:p,value:d,type:v.type,required:v.required})}}if(!n&&s.clk){var b=e(s.clk),w=b[0];p=w.name;if(p&&!w.disabled&&w.type=="image"){i.push({name:p,value:b.val()});i.push({name:p+".x",value:s.clk_x},{name:p+".y",value:s.clk_y})}}return i};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var n=[];this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})});return e.param(n)};e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n};e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,l=i=="select-one",c=l?o+1:a.length;for(var h=l?o:0;h<c;h++){var p=a[h];if(p.selected){var d=p.value;d||(d=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value);if(l)return d;u.push(d)}}return u}return e(t).val()};e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})};e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})};e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})};e.fn.enable=function(e){e===undefined&&(e=!0);return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){t===undefined&&(t=!0);return this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1);this.selected=t}})};e.fn.ajaxSubmit.debug=!1});