// "prop" method fix for previous versions of jQuery (1.5 and below)
function gformBindFormatPricingFields(){jQuery(".ginput_amount, .ginput_donation_amount").bind("change",function(){gformFormatPricingField(this)});jQuery(".ginput_amount, .ginput_donation_amount").each(function(){gformFormatPricingField(this)})}function Currency(e){this.currency=e;this.toNumber=function(e){return this.isNumeric(e)?parseFloat(e):gformCleanNumber(e,this.currency.symbol_right,this.currency.symbol_left,this.currency.decimal_separator)};this.toMoney=function(e){this.isNumeric(e)||(e=this.toNumber(e));if(e===!1)return"";e+="";negative="";if(e[0]=="-"){negative="-";e=parseFloat(e.substr(1))}money=this.numberFormat(e,this.currency.decimals,this.currency.decimal_separator,this.currency.thousand_separator);var t=this.currency.symbol_left?this.currency.symbol_left+this.currency.symbol_padding:"",n=this.currency.symbol_right?this.currency.symbol_padding+this.currency.symbol_right:"";money=negative+this.htmlDecode(t)+money+this.htmlDecode(n);return money};this.numberFormat=function(e,t,n,r,i){var i=typeof i=="undefined";e=(e+"").replace(",","").replace(" ","");var s=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,u=typeof r=="undefined"?",":r,a=typeof n=="undefined"?".":n,f="",l=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};t=="0"?f=(""+Math.round(s)).split("."):t==-1?f=(""+s).split("."):f=l(s,o).split(".");f[0].length>3&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,u));if(i&&(f[1]||"").length<o){f[1]=f[1]||"";f[1]+=(new Array(o-f[1].length+1)).join("0")}return f.join(a)};this.isNumeric=function(e){return gformIsNumber(e)};this.htmlDecode=function(e){var t,n,r=e,i=r.match(/&#[0-9]{1,5};/g);if(i!=null)for(var s=0;s<i.length;s++){n=i[s];t=n.substring(2,n.length-1);t>=-32768&&t<=65535?r=r.replace(n,String.fromCharCode(t)):r=r.replace(n,"")}return r}}function gformCleanNumber(e,t,n,r){e+=" ";e=e.replace(/&.*?;/,"",e);e=e.replace(t,"");e=e.replace(n,"");var i="",s=!1;for(var o=0;o<e.length;o++){var u=e.substr(o,1);parseInt(u)>=0&&parseInt(u)<=9||u==r?i+=u:u=="-"&&(s=!0)}var a="";for(var o=0;o<i.length;o++){var f=i.substr(o,1);f>="0"&&f<="9"?a+=f:f==r&&(a+=".")}s&&(a="-"+a);return gformIsNumber(a)?parseFloat(a):!1}function gformGetDecimalSeparator(e){var t;switch(e){case"currency":var n=new Currency(gf_global.gf_currency_config);t=n.currency.decimal_separator;break;case"decimal_comma":t=",";break;default:t="."}return t}function gformIsNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function gformIsNumeric(e,t){switch(t){case"decimal_dot":var n=new RegExp("^(-?[0-9]{1,3}(?:,?[0-9]{3})*(?:.[0-9]+)?)$");return n.test(e);case"decimal_comma":var n=new RegExp("^(-?[0-9]{1,3}(?:.?[0-9]{3})*(?:,[0-9]+)?)$");return n.test(e)}return!1}function gformDeleteUploadedFile(e,t,n){var r=jQuery("#field_"+e+"_"+t),i=jQuery(n).parent().index();r.find(".ginput_preview").eq(i).remove();r.find('input[type="file"]').removeClass("gform_hidden");r.find(".ginput_post_image_file").show();r.find('input[type="text"]').val("");var s=jQuery.secureEvalJSON(jQuery("#gform_uploaded_files_"+e).val());if(s){var o="input_"+t,u=r.find("#gform_multifile_upload_"+e+"_"+t);if(u.length>0){s[o].splice(i,1);var a=u.data("settings"),f=a.gf_vars.max_files;jQuery("#"+a.gf_vars.message_id).html("");s[o].length<f&&gfMultiFileUploader.toggleDisabled(a,!1)}else s[o]=null;jQuery("#gform_uploaded_files_"+e).val(jQuery.toJSON(s))}}function gformIsHidden(e){return e.parents(".gfield").not(".gfield_hidden_product").css("display")=="none"}function gformCalculateTotalPrice(e){if(!_gformPriceFields[e])return;var t=0;_anyProductSelected=!1;for(var n=0;n<_gformPriceFields[e].length;n++)t+=gformCalculateProductPrice(e,_gformPriceFields[e][n]);if(_anyProductSelected){var r=gformGetShippingPrice(e);t+=r}window.gform_product_total&&(t=window.gform_product_total(e,t));t=gform.applyFilters("gform_product_total",t,e);var i=jQuery(".ginput_total_"+e);if(i.length>0){i.next().val(t);i.html(gformFormatMoney(t))}}function gformGetShippingPrice(e){var t=jQuery(".gfield_shipping_"+e+' input[type="hidden"], .gfield_shipping_'+e+" select, .gfield_shipping_"+e+" input:checked"),n=0;t.length==1&&!gformIsHidden(t)&&(t.attr("type")&&t.attr("type").toLowerCase()=="hidden"?n=t.val():n=gformGetPrice(t.val()));return gformToNumber(n)}function gformGetFieldId(e){var t=jQuery(e).attr("id"),n=t.split("_");if(n.length<=0)return 0;var r=n[n.length-1];return r}function gformCalculateProductPrice(e,t){var n=gformGetBasePrice(e,t),r="_"+e+"_"+t;jQuery(".gfield_option"+r+", .gfield_shipping_"+e).find("select").each(function(){var t=gformGetPrice(jQuery(this).val()),n=gformGetFieldId(this);jQuery(this).children("option").each(function(){var r=gformGetOptionLabel(this,jQuery(this).val(),t,e,n);jQuery(this).html(r)})});jQuery(".gfield_option"+r).find(".gfield_checkbox").find("input").each(function(){var t=gformGetFieldId(jQuery(this).parents(".gfield_checkbox")),n=jQuery(this).next(),r=gformGetOptionLabel(n,jQuery(this).val(),0,e,t);n.html(r)});jQuery(".gfield_option"+r+", .gfield_shipping_"+e).find(".gfield_radio").each(function(){var t=0,n=jQuery(this).find("input:checked").val(),r=gformGetFieldId(this);n&&(t=gformGetPrice(n));jQuery(this).find("input").each(function(){var n=jQuery(this).next(),i=gformGetOptionLabel(n,jQuery(this).val(),t,e,r);n.html(i)})});jQuery(".gfield_option"+r).find("input:checked, select").each(function(){gformIsHidden(jQuery(this))||(n+=gformGetPrice(jQuery(this).val()))});var i=gformGetProductQuantity(e,t);i>0&&(_anyProductSelected=!0);n*=i;n=Math.round(n*100)/100;return n}function gformGetProductQuantity(e,t){var n,r=jQuery("#ginput_quantity_"+e+"_"+t);if(r.length>0)n=gformIsNumber(r.val())?r.val():0;else{quantityElement=jQuery(".gfield_quantity_"+e+"_"+t);n=1;quantityElement.find("select").length>0?n=quantityElement.find("select").val():quantityElement.find("input").length>0&&(n=quantityElement.find("input").val());gformIsNumber(n)||(n=0)}n=parseFloat(n);return n}function gformGetBasePrice(e,t){var n="_"+e+"_"+t,r=0,i=jQuery("#ginput_base_price"+n+", .gfield_donation"+n+' input[type="text"], .gfield_product'+n+" .ginput_amount");if(i.length>0){r=i.val();gformIsHidden(i)&&(r=0)}else{i=jQuery(".gfield_product"+n+" select, .gfield_product"+n+" input:checked, .gfield_donation"+n+" select, .gfield_donation"+n+" input:checked");var s=i.val();if(s){s=s.split("|");r=s.length>1?s[1]:0}gformIsHidden(i)&&(r=0)}var o=new Currency(gf_global.gf_currency_config);r=o.toNumber(r);return r===!1?0:r}function gformFormatMoney(e){if(!gf_global.gf_currency_config)return e;var t=new Currency(gf_global.gf_currency_config);return t.toMoney(e)}function gformFormatPricingField(e){if(gf_global.gf_currency_config){var t=new Currency(gf_global.gf_currency_config),n=t.toMoney(jQuery(e).val());jQuery(e).val(n)}}function gformToNumber(e){var t=new Currency(gf_global.gf_currency_config);return t.toNumber(e)}function gformGetPriceDifference(e,t){var n=parseFloat(t)-parseFloat(e);price=gformFormatMoney(n);n>0&&(price="+"+price);return price}function gformGetOptionLabel(e,t,n,r,i){e=jQuery(e);var s=gformGetPrice(t),o=e.attr("price"),u=e.html().replace(/<span(.*)<\/span>/i,"").replace(o,""),a=gformGetPriceDifference(n,s);a=gformToNumber(a)==0?"":" "+a;e.attr("price",a);var f=e[0].tagName.toLowerCase()=="option"?" "+a:"<span class='ginput_price'>"+a+"</span>",l=u+f;window.gform_format_option_label&&(l=gform_format_option_label(l,u,f,n,s,r,i));return l}function gformGetProductIds(e,t){var n=jQuery(t).hasClass(e)?jQuery(t).attr("class").split(" "):jQuery(t).parents("."+e).attr("class").split(" ");for(var r=0;r<n.length;r++)if(n[r].substr(0,e.length)==e&&n[r]!=e)return{formId:n[r].split("_")[2],productFieldId:n[r].split("_")[3]};return{formId:0,fieldId:0}}function gformGetPrice(e){var t=e.split("|"),n=new Currency(gf_global.gf_currency_config);return t.length>1&&n.toNumber(t[1])!==!1?n.toNumber(t[1]):0}function gformRegisterPriceField(e){_gformPriceFields[e.formId]||(_gformPriceFields[e.formId]=new Array);for(var t=0;t<_gformPriceFields[e.formId].length;t++)if(_gformPriceFields[e.formId][t]==e.productFieldId)return;_gformPriceFields[e.formId].push(e.productFieldId)}function gformInitPriceFields(){jQuery(".gfield_price").each(function(){var e=gformGetProductIds("gfield_price",this);gformRegisterPriceField(e);jQuery(this).find('input[type="text"], input[type="number"], select').change(function(){var e=gformGetProductIds("gfield_price",this);e.formId==0&&(e=gformGetProductIds("gfield_shipping",this));jQuery(document).trigger("gform_price_change",[e,this]);gformCalculateTotalPrice(e.formId)});jQuery(this).find('input[type="radio"], input[type="checkbox"]').click(function(){var e=gformGetProductIds("gfield_price",this);e.formId==0&&(e=gformGetProductIds("gfield_shipping",this));jQuery(document).trigger("gform_price_change",[e,this]);gformCalculateTotalPrice(e.formId)})});for(formId in _gformPriceFields){if(!_gformPriceFields.hasOwnProperty(formId))continue;gformCalculateTotalPrice(formId)}}function gformShowPasswordStrength(e){var t=jQuery("#"+e).val(),n=jQuery("#"+e+"_2").val(),r=gformPasswordStrength(t,n),i=window.gf_text["password_"+r];jQuery("#"+e+"_strength").val(r);jQuery("#"+e+"_strength_indicator").removeClass("blank mismatch short good bad strong").addClass(r).html(i)}function gformPasswordStrength(e,t){var n=1,r=2,i=3,s=4,o=5,u=0,a,f;if(e.length<=0)return"blank";if(e!=t&&t.length>0)return"mismatch";if(e.length<4)return"short";e.match(/[0-9]/)&&(u+=10);e.match(/[a-z]/)&&(u+=26);e.match(/[A-Z]/)&&(u+=26);e.match(/[^a-zA-Z0-9]/)&&(u+=31);a=Math.log(Math.pow(u,e.length));f=a/Math.LN2;return f<40?"bad":f<56?"good":"strong"}function gformAddListItem(e,t){if(jQuery(e).hasClass("gfield_icon_disabled"))return;var n=jQuery(e).parent().parent(),r=n.clone();r.find("input, select").val("").attr("tabindex",r.find("input:last").attr("tabindex"));n.after(r);gformToggleIcons(n.parent(),t);gformAdjustClasses(n.parent())}function gformDeleteListItem(e,t){var n=jQuery(e).parent().parent(),r=n.parent();n.remove();gformToggleIcons(r,t);gformAdjustClasses(r)}function gformAdjustClasses(e){var t=e.children();for(var n=0;n<t.length;n++){var r=(n+1)%2==0?"gfield_list_row_even":"gfield_list_row_odd";jQuery(t[n]).removeClass("gfield_list_row_odd").removeClass("gfield_list_row_even").addClass(r)}}function gformToggleIcons(e,t){var n=e.children().length;n==1?e.find(".delete_list_item").css("visibility","hidden"):e.find(".delete_list_item").css("visibility","visible");if(t>0&&n>=t){gfield_original_title=e.find(".add_list_item:first").attr("title");e.find(".add_list_item").addClass("gfield_icon_disabled").attr("title","")}else{var r=e.find(".add_list_item");r.removeClass("gfield_icon_disabled");gfield_original_title&&r.attr("title",gfield_original_title)}}function gformMatchCard(e){var t=gformFindCardType(jQuery("#"+e).val()),n=jQuery("#"+e).parents(".gfield").find(".gform_card_icon_container");if(!t)jQuery(n).find(".gform_card_icon").removeClass("gform_card_icon_selected gform_card_icon_inactive");else{jQuery(n).find(".gform_card_icon").removeClass("gform_card_icon_selected").addClass("gform_card_icon_inactive");jQuery(n).find(".gform_card_icon_"+t).removeClass("gform_card_icon_inactive").addClass("gform_card_icon_selected")}}function gformFindCardType(e){if(e.length<4)return!1;var t=window.gf_cc_rules,n=new Array;for(type in t){if(!t.hasOwnProperty(type))continue;for(i in t[type]){if(!t[type].hasOwnProperty(i))continue;if(t[type][i].indexOf(e.substring(0,t[type][i].length))===0){n[n.length]=type;break}}}return n.length==1?n[0].toLowerCase():!1}function gformToggleCreditCard(){jQuery("#gform_payment_method_creditcard").is(":checked")?jQuery(".gform_card_fields_container").slideDown():jQuery(".gform_card_fields_container").slideUp()}function gformInitChosenFields(e,t){return jQuery(e).each(function(){var e=jQuery(this);if(e.is(":visible")&&e.siblings(".chzn-container").length==0){var n=gform.applyFilters("gform_chosen_options",{no_results_text:t},e);e.chosen(n)}})}function gformInitCurrencyFormatFields(e){jQuery(e).each(function(){var e=jQuery(this);e.val(gformFormatMoney(jQuery(this).val()))}).change(function(e){jQuery(this).val(gformFormatMoney(jQuery(this).val()))})}function gformFormatNumber(e,t,n,r){if(typeof n=="undefined")if(window.gf_global){var i=new Currency(gf_global.gf_currency_config);n=i.currency.decimal_separator}else n=".";if(typeof r=="undefined")if(window.gf_global){var i=new Currency(gf_global.gf_currency_config);r=i.currency.thousand_separator}else r=",";var i=new Currency;return i.numberFormat(e,t,n,r,!1)}function gformToNumber(e){var t=new Currency(gf_global.gf_currency_config);return t.toNumber(e)}function getMatchGroups(e,t){var n=new Array;while(t.test(e)){var r=n.length;n[r]=t.exec(e);e=e.replace(""+n[r][0],"")}return n}function gformInitSpinner(e,t){if(typeof t=="undefined"||!t)t=gform.applyFilters("gform_spinner_url",gf_global.spinnerUrl,e);jQuery("#gform_"+e).submit(function(){jQuery("#gform_ajax_spinner_".formId).length==0&&jQuery("#gform_submit_button_"+e+", #gform_wrapper_"+e+" .gform_next_button, #gform_wrapper_"+e+" .gform_image_button").after('<img id="gform_ajax_spinner_'+e+'"  class="gform_ajax_spinner" src="'+t+'" alt="" />')})}typeof jQuery.fn.prop=="undefined"&&(jQuery.fn.prop=jQuery.fn.attr);jQuery(document).ready(function(){jQuery(document).bind("gform_post_render",gformBindFormatPricingFields)});var _gformPriceFields=new Array,_anyProductSelected,gfield_original_title="",GFCalc=function(formId,formulaFields){this.patt=/{[^{]*?:(\d+(\.\d+)?)(:(.*?))?}/i;this.exprPatt=/^[0-9 -/*\(\)]+$/i;this.isCalculating={};this.init=function(e,t){var n=this;jQuery(document).bind("gform_post_conditional_logic",function(){for(var r=0;r<t.length;r++){var i=jQuery.extend({},t[r]);n.runCalc(i,e)}});for(var r=0;r<t.length;r++){var i=jQuery.extend({},t[r]);this.runCalc(i,e);this.bindCalcEvents(i,e)}};this.runCalc=function(formulaField,formId){var calcObj=this,field=jQuery("#field_"+formId+"_"+formulaField.field_id),formulaInput=jQuery("#input_"+formId+"_"+formulaField.field_id),previous_val=formulaInput.val(),expr=calcObj.replaceFieldTags(formId,formulaField.formula,formulaField).replace(/(\r\n|\n|\r)/gm,""),result="";if(calcObj.exprPatt.test(expr))try{result=eval(expr)}catch(e){}isFinite(result)||(result=0);if(window.gform_calculation_result){result=window.gform_calculation_result(result,formulaField,formId,calcObj);window.console&&console.log('"gform_calculation_result" function is deprecated since version 1.8! Use "gform_calculation_result" JS hook instead.')}result=gform.applyFilters("gform_calculation_result",result,formulaField,formId,calcObj);var formattedResult=gform.applyFilters("gform_calculation_format_result",!1,result,formulaField,formId,calcObj),numberFormat=gf_global.number_formats[formId][formulaField.field_id];if(formattedResult!==!1)result=formattedResult;else if(field.hasClass("gfield_price")||numberFormat=="currency")result=gformFormatMoney(result?result:0);else{var decimalSeparator,thousandSeparator;if(formulaField.numberFormat=="decimal_comma"){decimalSeparator=",";thousandSeparator="."}else if(formulaField.numberFormat=="decimal_dot"){decimalSeparator=".";thousandSeparator=","}result=gformFormatNumber(result,gformIsNumber(formulaField.rounding)?formulaField.rounding:-1,decimalSeparator,thousandSeparator)}if(result==previous_val)return;if(field.hasClass("gfield_price")){formulaInput.text(result);jQuery("#ginput_base_price_"+formId+"_"+formulaField.field_id).val(result).trigger("change");gformCalculateTotalPrice(formId)}else formulaInput.val(result).trigger("change")};this.bindCalcEvents=function(e,t){var n=this,r=e.field_id,i=getMatchGroups(e.formula,this.patt);n.isCalculating[r]=!1;for(var s in i){if(!i.hasOwnProperty(s))continue;var o=i[s][1],u=parseInt(o),a=jQuery("#field_"+t+"_"+u).find('input[name="input_'+o+'"], select[name="input_'+o+'"]');a.prop("type")=="checkbox"||a.prop("type")=="radio"?jQuery(a).click(function(){n.bindCalcEvent(o,e,t,0)}):a.is("select")||a.prop("type")=="hidden"?jQuery(a).change(function(){n.bindCalcEvent(o,e,t,0)}):jQuery(a).keydown(function(){n.bindCalcEvent(o,e,t)}).change(function(){n.bindCalcEvent(o,e,t,0)})}};this.bindCalcEvent=function(e,t,n,r){var i=this,s=t.field_id;r=r==undefined?345:r;i.isCalculating[s][e]&&clearTimeout(i.isCalculating[s][e]);i.isCalculating[s][e]=window.setTimeout(function(){i.runCalc(t,n)},r)};this.replaceFieldTags=function(e,t,n){var r=getMatchGroups(t,this.patt),s=t;for(i in r){if(!r.hasOwnProperty(i))continue;var o=r[i][1],u=parseInt(o),a=r[i][3],f=0,l=jQuery("#field_"+e+"_"+u).find('input[name="input_'+o+'"], select[name="input_'+o+'"]');if(l.length>1||l.prop("type")=="checkbox")l=l.filter(":checked");var c=window.gf_check_field_rule?gf_check_field_rule(e,u,true,"")=="show":!0;if(l.length>0&&c){var h=l.val();h=h.split("|");h.length>1?f=h[1]:f=l.val()}var p=gf_global.number_formats[e][u];p||(p=gf_global.number_formats[e][n.field_id]);var d=gformGetDecimalSeparator(p);f=gformCleanNumber(f,"","",d);f||(f=0);t=t.replace(r[i][0],f)}return t};this.init(formId,formulaFields)},gform={hooks:{action:{},filter:{}},addAction:function(e,t,n,r){gform.addHook("action",e,t,n,r)},addFilter:function(e,t,n,r){gform.addHook("filter",e,t,n,r)},doAction:function(e){gform.doHook("action",e,arguments)},applyFilters:function(e){return gform.doHook("filter",e,arguments)},removeAction:function(e,t){gform.removeHook("action",e,t)},removeFilter:function(e,t,n){gform.removeHook("filter",e,t,n)},addHook:function(e,t,n,r,i){undefined==gform.hooks[e][t]&&(gform.hooks[e][t]=[]);var s=gform.hooks[e][t];undefined==i&&(i=t+"_"+s.length);gform.hooks[e][t].push({tag:i,callable:n,priority:r})},doHook:function(e,t,n){n=Array.prototype.slice.call(n,1);if(undefined!=gform.hooks[e][t]){var r=gform.hooks[e][t],i;r.sort(function(e,t){return e.priority-t.priority});for(var s=0;s<r.length;s++){i=r[s].callable;typeof i!="function"&&(i=window[i]);"action"==e?i.apply(null,n):n[0]=i.apply(null,n)}}if("filter"==e)return n[0]},removeHook:function(e,t,n,r){if(undefined!=gform.hooks[e][t]){var i=gform.hooks[e][t];for(var s=i.length-1;s>=0;s--)(undefined==r||r==i[s].tag)&&(undefined==n||n==i[s].priority)&&i.splice(s,1)}}};(function(e,t){function i(i){function l(e,n){t("#"+e).prepend("<li>"+n+"</li>")}function c(){var e="#gform_uploaded_files_"+a,n=t(e),r;r=n.val();r=""===r?{}:t.parseJSON(r);return r}function h(e){var t=c(),n=m(e);typeof t[n]=="undefined"&&(t[n]=[]);return t[n]}function p(e){var t=h(e);return t.length}function d(e,t){var n=h(e);n.unshift(t);v(e,n)}function v(e,n){var r=c(),i=t("#gform_uploaded_files_"+a),s=m(e);r[s]=n;i.val(t.toJSON(r))}function m(e){return"input_"+e}function g(e){e.preventDefault()}var o=t(i).data("settings"),u=new plupload.Uploader(o);a=u.settings.multipart_params.form_id;e.uploaders[o.container]=u;var a,f;u.bind("Init",function(n,r){n.features.dragdrop||t(".gform_drop_instructions").hide();var i=n.settings.multipart_params.field_id,s=parseInt(n.settings.gf_vars.max_files),o=p(i);s>0&&o>=s&&e.toggleDisabled(n.settings,!0)});e.toggleDisabled=function(e,n){t("#"+e.browse_button).prop("disabled",n)};u.init();u.bind("FilesAdded",function(r,i){var o=parseInt(r.settings.gf_vars.max_files),u=r.settings.multipart_params.field_id,c=p(u),h=r.settings.gf_vars.disallowed_extensions,d;if(o>0&&c>=o){t.each(i,function(e,t){r.removeFile(t);return});return}t.each(i,function(e,i){d=i.name.split(".").pop();if(t.inArray(d,h)>-1){l(r.settings.gf_vars.message_id,i.name+" - "+n.illegal_extension);r.removeFile(i);return}if(i.status==plupload.FAILED||o>0&&c>=o){r.removeFile(i);return}var s=typeof i.size!="undefined"?plupload.formatSize(i.size):n.in_progress,u='<div id="'+i.id+'" class="ginput_preview">'+i.name+" ("+s+") <b></b> "+'<a href="javascript:void(0)" title="'+n.cancel_upload+"\" onclick='$this=jQuery(this); var uploader = gfMultiFileUploader.uploaders."+r.settings.container+';uploader.stop();uploader.removeFile(uploader.getFile("'+i.id+'"));$this.after("'+n.cancelled+"\"); uploader.start();$this.remove();'>"+n.cancel+"</a>"+"</div>";t("#"+r.settings.filelist).prepend(u);c++});r.refresh();var v="form#gform_"+a,m="input:hidden[name='gform_unique_id']",g=v+" "+m,y=t(g);y.length==0&&(y=t(m));f=y.val();if(""===f){f=s();y.val(f)}if(o>0&&c>=o){l(r.settings.gf_vars.message_id,n.max_reached);e.toggleDisabled(r.settings,!0)}r.settings.multipart_params.gform_unique_id=f;r.start()});u.bind("UploadProgress",function(e,n){var r=n.percent+"%";t("#"+n.id+" b").html(r)});u.bind("Error",function(e,r){if(r.code===plupload.FILE_EXTENSION_ERROR)l(e.settings.gf_vars.message_id,r.file.name+" - "+n.invalid_file_extension+" "+e.settings.filters[0].extensions);else if(r.code===plupload.FILE_SIZE_ERROR)l(e.settings.gf_vars.message_id,r.file.name+" - "+n.file_exceeds_limit);else{var i="<li>Error: "+r.code+", Message: "+r.message+(r.file?", File: "+r.file.name:"")+"</li>";t("#"+e.settings.gf_vars.message_id).prepend(i)}e.removeFile(r.file);e.refresh()});u.bind("FileUploaded",function(e,i,s){var o=t.secureEvalJSON(s.response);if(o.status=="error"){t("#"+e.settings.filelist).prepend(o.error.message);return}var u="<strong>"+i.name+"</strong>",a=e.settings.multipart_params.form_id,c=e.settings.multipart_params.field_id;u="<img class='gform_delete' src='"+r+"/delete.png' "+"onclick='gformDeleteUploadedFile("+a+","+c+", this);' "+"alt='"+n.delete_file+"' "+"title='"+n.delete_file+"' /> "+u;t("#"+i.id).html(u);var h=e.settings.multipart_params.field_id;if(i.percent==100){var p=m(h),v=f+"_"+p+"_"+i.target_name;o.data.uploaded_filename===i.name?d(h,o.data):l(e.settings.gf_vars.message_id,n.unknown_error)}});t("#"+o.drop_element).on({dragenter:g,dragover:g})}function s(){return"xxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}e.uploaders={};var n=typeof gform_gravityforms!="undefined"?gform_gravityforms.strings:{},r=typeof gform_gravityforms!="undefined"?gform_gravityforms.vars.images_url:"";t(document).ready(function(){if(typeof adminpage!="undefined"&&adminpage==="toplevel_page_gf_edit_forms"||typeof plupload=="undefined")t(".gform_button_select_files").prop("disabled",!0);else if(typeof adminpage!="undefined")t(".gform_fileupload_multifile").each(function(){i(this)});else{t(document).bind("gform_post_render",function(r,s){t("form#gform_"+s+" .gform_fileupload_multifile").each(function(){i(this)});var o=t("form#gform_"+s);o.length>0&&o.submit(function(){var r=!1;t.each(e.uploaders,function(e,t){if(t.total.queued>0){r=!0;return!1}});if(r){alert(n.currently_uploading);window["gf_submitting_"+s]=!1;return!1}})});t(document).bind("gform_post_conditional_logic",function(n,r){t.each(e.uploaders,function(e,t){t.refresh()})})}})})(window.gfMultiFileUploader=window.gfMultiFileUploader||{},jQuery);